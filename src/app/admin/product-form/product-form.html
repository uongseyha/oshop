<div class="row">
  <div class="col-md-6">
    <form class="p-3" #productForm="ngForm" (ngSubmit)="saveProduct(productForm)" novalidate>
      <!-- Title -->
      <div class="input-group mb-3">
        <span class="input-group-text">Title</span>
        <input
          type="text"
          class="form-control"
          name="title"
          [(ngModel)]="product.title"
          required
          minlength="3"
          #title="ngModel"
          [class.is-invalid]="title.invalid && title.touched"
        />
      </div>
      <div class="text-danger" *ngIf="title.invalid && title.touched">
        <small *ngIf="title.errors?.['required']">Title is required</small>
        <small *ngIf="title.errors?.['minlength']"> Title must be at least 3 characters </small>
      </div>

      <!-- Price -->
      <div class="input-group mb-3">
        <span class="input-group-text">$</span>
        <input
          type="number"
          class="form-control"
          name="price"
          [(ngModel)]="product.price"
          required
          min="0.01"
          step="0.01"
          #price="ngModel"
          [class.is-invalid]="price.invalid && price.touched"
        />
      </div>
      <div class="text-danger" *ngIf="price.invalid && price.touched">
        <small *ngIf="price.errors?.['required']">Price is required</small>
        <small *ngIf="price.errors?.['min']">Price must be greater than 0</small>
      </div>

      <!-- Category -->
      <div class="input-group mb-3">
        <label class="input-group-text">Category</label>
        <select
          class="form-select"
          name="categoryId"
          [(ngModel)]="product.categoryId"
          required
          #categoryId="ngModel"
          [class.is-invalid]="categoryId.invalid && categoryId.touched"
        >
          <option value="" disabled selected>Select category</option>
          <option *ngFor="let c of categories" [value]="c.id">
            {{ c.description }}
          </option>
        </select>
      </div>
      <div class="text-danger" *ngIf="categoryId.invalid && categoryId.touched">
        <small>Category is required</small>
      </div>

      <!-- Image URL -->
      <div class="input-group mb-3">
        <span class="input-group-text">Image URL</span>
        <input
          type="url"
          class="form-control"
          name="imageUrl"
          [(ngModel)]="product.imageUrl"
          required
          pattern="https?://.+"
          #imageUrl="ngModel"
          [class.is-invalid]="imageUrl.invalid && imageUrl.touched"
        />
      </div>
      <div class="text-danger" *ngIf="imageUrl.invalid && imageUrl.touched">
        <small *ngIf="imageUrl.errors?.['required']">Image URL is required</small>
        <small *ngIf="imageUrl.errors?.['pattern']"> Enter a valid URL (http/https) </small>
      </div>

      <!-- Submit -->
      <button type="submit" class="btn btn-primary w-100" [disabled]="productForm.invalid">
        Submit
      </button>
    </form>
  </div>
  <div class="col-md-6">
    <div class="card" style="width: 18rem">
      <img [src]="imageUrl.value" class="card-img-top" alt="..." />
      <div class="card-body">
        <h5 class="card-title">{{ title.value }}</h5>
        <p class="card-text">${{ price.value | currency:'USD': 'symbol':'1.2-2' }}
        </p>
        <a href="#" class="btn btn-primary">Go somewhere</a>
      </div>
    </div>
  </div>
</div>
