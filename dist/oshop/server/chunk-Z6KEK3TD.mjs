import './polyfills.server.mjs';
import{a as F}from"./chunk-KIQJ5J5P.mjs";import{F as D,G as j,I as O,g as S,h as E,j as T,k as V}from"./chunk-KSQTIZOT.mjs";import{$a as I,Bc as h,Dc as f,Ec as C,Ob as a,Pb as n,Qb as r,Rb as w,Yb as g,bb as o,bc as _,cc as l,ka as p,la as u,nb as b,qc as c,rc as k,sc as v,tb as y,zb as x}from"./chunk-RSKEQSSP.mjs";import"./chunk-S6KH3LOX.mjs";var L=i=>["/product-detail",i];function q(i,e){if(i&1){let t=g();n(0,"div",8)(1,"h3",9),c(2,"\u{1F6D2} Your Cart"),r(),n(3,"button",10),_("click",function(){p(t);let d=l(2);return u(d.checkout())}),c(4,"Checkout"),r()()}}function N(i,e){i&1&&(n(0,"h3",11),c(1,"\u{1F6D2} Your Cart"),r())}function R(i,e){if(i&1){let t=g();n(0,"div",12)(1,"div",13)(2,"a",14),w(3,"img",15),r()(),n(4,"div",16)(5,"a",17),c(6),r(),n(7,"small",18),c(8),f(9,"currency"),r()(),n(10,"div",19)(11,"div",20)(12,"button",21),_("click",function(){let d=p(t).$implicit,s=l(2);return u(s.decreaseQty(d))}),c(13,"\u2212"),r(),n(14,"input",22),_("change",function(d){let s=p(t).$implicit,Q=l(2);return u(Q.updateQty(s,d))}),r(),n(15,"button",21),_("click",function(){let d=p(t).$implicit,s=l(2);return u(s.increaseQty(d))}),c(16,"+"),r()()(),n(17,"div",23),c(18),f(19,"currency"),r(),n(20,"div",24)(21,"button",25),_("click",function(){let d=p(t).$implicit,s=l(2);return u(s.removeItem(d.id))}),c(22,"\u2715"),r()()()}if(i&2){let t=e.$implicit;o(2),a("routerLink",h(11,L,t.productId)),o(),a("src",t.imageUrl||"https://st2.depositphotos.com/2586633/46477/v/450/depositphotos_464771766-stock-illustration-no-photo-or-blank-image.jpg",I),o(2),a("routerLink",h(13,L,t.productId)),o(),v(" ",t.productTitle," "),o(2),v(" ",C(9,7,t.price)," "),o(6),a("value",t.quantity),o(4),v(" ",C(19,9,t.price*t.quantity)," ")}}function $(i,e){if(i&1&&(n(0,"div",26)(1,"h5",9),c(2,"Total"),r(),n(3,"h5",9),c(4),f(5,"currency"),r()()),i&2){let t=l(2);o(4),k(C(5,1,t.total()))}}function B(i,e){if(i&1&&(n(0,"div",1)(1,"div",2)(2,"div",3),x(3,q,5,0,"div",4)(4,N,2,0,"h3",5)(5,R,23,15,"div",6)(6,$,6,3,"div",7),r()()()),i&2){let t=l();o(3),a("ngIf",t.cart.items.length>0),o(),a("ngIf",t.cart.items.length===0),o(),a("ngForOf",t.cart.items),o(),a("ngIf",t.cart.items.length>0)}}var M=class i{constructor(e,t){this.cartService=e;this.router=t}cart;cartId;ngOnInit(){this.cartService.getOrCreateCart().subscribe(e=>{this.cartId=e,this.loadCart()})}loadCart(){this.cartService.getCart(this.cartId).subscribe(e=>this.cart=e)}increaseQty(e){this.updateItem(e,1)}decreaseQty(e){e.quantity>1&&this.updateItem(e,-1)}updateQty(e,t){let m=t.target.valueAsNumber;m>=1&&this.updateItem(e,m>e.quantity?1:-1)}updateItem(e,t){this.cartService.updateItem(this.cartId,e.productId,t).subscribe(()=>this.loadCart())}removeItem(e){this.cartService.removeItem(this.cartId,e).subscribe(()=>this.loadCart())}total(){return this.cart.items.reduce((e,t)=>e+t.price*t.quantity,0)}checkout(){this.router.navigate(["/check-out"])}static \u0275fac=function(t){return new(t||i)(b(F),b(D))};static \u0275cmp=y({type:i,selectors:[["app-cart"]],decls:1,vars:1,consts:[["class","container my-4",4,"ngIf"],[1,"container","my-4"],[1,"card","shadow-sm","border-0"],[1,"card-body"],["class","d-flex justify-content-between align-items-center mb-4",4,"ngIf"],["class","mb-4 fw-bold",4,"ngIf"],["class","row align-items-center py-3 border-bottom",4,"ngFor","ngForOf"],["class","d-flex justify-content-between align-items-center mt-4",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fw-bold","mb-0"],[1,"btn","btn-primary",3,"click"],[1,"mb-4","fw-bold"],[1,"row","align-items-center","py-3","border-bottom"],[1,"col-md-2","col-4"],[3,"routerLink"],[1,"img-fluid","rounded","border",2,"max-height","80px","object-fit","cover",3,"src"],[1,"col-md-3","col-8"],[1,"text-decoration-none","fw-semibold","text-dark","d-block",3,"routerLink"],[1,"text-muted"],[1,"col-md-3","mt-2","mt-md-0"],[1,"input-group","input-group-sm","w-75"],[1,"btn","btn-outline-secondary",3,"click"],["type","number","min","1",1,"form-control","text-center",3,"change","value"],[1,"col-md-3","text-md-end","fw-semibold","mt-2","mt-md-0"],[1,"col-md-1","text-end"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"d-flex","justify-content-between","align-items-center","mt-4"]],template:function(t,m){t&1&&x(0,B,7,4,"div",0),t&2&&a("ngIf",m.cart)},dependencies:[V,S,E,O,j,T],styles:["h2[_ngcontent-%COMP%]{color:#333}"]})};export{M as CartComponent};
