import './polyfills.server.mjs';
import{n as a}from"./chunk-WGIOOPUP.mjs";import{$ as o,Ia as n,da as i,g as s}from"./chunk-RSKEQSSP.mjs";var u=class r{USER_STORAGE_KEY="currentUser";isBrowser;userSubject=new s(void 0);user$=this.userSubject.asObservable();constructor(e){this.isBrowser=a(e),this.initializeAuthState()}initializeAuthState(){if(!this.isBrowser){this.userSubject.next(null);return}let e=this.getUserFromStorage();e?this.userSubject.next(e):this.userSubject.next(null)}login(e){this.saveUserToStorage(e),this.userSubject.next(e)}logout(){this.clearUserFromStorage(),this.userSubject.next(null)}getCurrentUser(){return this.userSubject.value}isAuthenticated(){let e=this.userSubject.value;return e!=null}getUserFromStorage(){try{let e=localStorage.getItem(this.USER_STORAGE_KEY);return e?JSON.parse(e):null}catch(e){return console.error("Error parsing user from localStorage:",e),this.clearUserFromStorage(),null}}saveUserToStorage(e){try{localStorage.setItem(this.USER_STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving user to localStorage:",t)}}clearUserFromStorage(){localStorage.removeItem(this.USER_STORAGE_KEY)}static \u0275fac=function(t){return new(t||r)(i(n))};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})};export{u as a};
