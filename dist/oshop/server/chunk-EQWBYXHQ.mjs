import './polyfills.server.mjs';
import{a as B}from"./chunk-UWMMVXIL.mjs";import{h as O}from"./chunk-TJTHVVXC.mjs";import{a as k}from"./chunk-KIQJ5J5P.mjs";import{a as E,d as q,g as N,i as A,n as j,r as Q}from"./chunk-EEMXSYA6.mjs";import{C as V,h as D,j as M,k as T}from"./chunk-KSQTIZOT.mjs";import{$a as g,Dc as P,Ec as w,Ob as l,Pb as r,Qb as n,Rb as C,Yb as h,bb as d,bc as v,cc as s,ka as p,la as u,nb as m,qc as o,rc as f,tb as x,uc as b,vc as S,wc as I,zb as y}from"./chunk-RSKEQSSP.mjs";import"./chunk-S6KH3LOX.mjs";function W(c,a){if(c&1){let t=h();r(0,"div",1)(1,"div",2)(2,"div",3),C(3,"img",4),n(),r(4,"div",3)(5,"h2"),o(6),n(),r(7,"h4",5),o(8),P(9,"currency"),n(),r(10,"p"),o(11),n(),r(12,"div",6)(13,"div",7)(14,"button",8),v("click",function(){p(t);let i=s();return u(i.decreaseQty())}),o(15,"\u2212"),n(),r(16,"input",9),I("ngModelChange",function(i){p(t);let _=s();return S(_.quantity,i)||(_.quantity=i),u(i)}),n(),r(17,"button",8),v("click",function(){p(t);let i=s();return u(i.increaseQty())}),o(18,"+"),n()()(),r(19,"div",10)(20,"button",11),v("click",function(){p(t);let i=s();return u(i.addToCart())}),o(21,"Add to Cart"),n()()()()()}if(c&2){let t=s();d(3),l("src",t.product.imageUrl||"https://st2.depositphotos.com/2586633/46477/v/450/depositphotos_464771766-stock-illustration-no-photo-or-blank-image.jpg",g),d(3),f(t.product.title),d(2),f(w(9,5,t.product.price)),d(3),f(t.product.title),d(5),b("ngModel",t.quantity)}}function F(c,a){c&1&&(r(0,"div",1)(1,"p"),o(2,"Loading product details..."),n()())}var R=class c{constructor(a,t,e,i){this.route=a;this.productService=t;this.cartService=e;this.toastr=i}product;quantity=1;cartId;ngOnInit(){let a=Number(this.route.snapshot.paramMap.get("id"));this.productService.getProductById(a).subscribe(t=>this.product=t),this.cartService.getOrCreateCart().subscribe(t=>{this.cartId=t,this.cartService.getProductQuantity(t,a).subscribe(e=>{e>0&&(this.quantity=e)})})}increaseQty(){this.quantity++}decreaseQty(){this.quantity>1&&this.quantity--}addToCart(){!this.cartId||!this.product||this.cartService.addItem(this.cartId,this.product.id,this.quantity).subscribe(()=>this.toastr.success("Product added to cart"))}static \u0275fac=function(t){return new(t||c)(m(V),m(B),m(k),m(O))};static \u0275cmp=x({type:c,selectors:[["app-product-detail"]],decls:2,vars:2,consts:[["class","container my-4",4,"ngIf"],[1,"container","my-4"],[1,"row"],[1,"col-md-6"],[1,"img-fluid","rounded","shadow-sm",3,"src"],[1,"text-success"],[1,"d-flex","align-items-center","mt-3"],[1,"input-group","me-2",2,"width","150px"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","number","min","1",1,"form-control","text-center",3,"ngModelChange","ngModel"],[1,"mt-3"],[1,"btn","btn-primary","mt-2",2,"width","150px",3,"click"]],template:function(t,e){t&1&&y(0,W,22,7,"div",0)(1,F,3,0,"div",0),t&2&&(l("ngIf",e.product),d(),l("ngIf",!e.product))},dependencies:[T,D,Q,E,A,q,j,N,M],encapsulation:2})};export{R as ProductDetailComponent};
