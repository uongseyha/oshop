import './polyfills.server.mjs';
import{h as z}from"./chunk-WPFXNJQP.mjs";import{a as Q}from"./chunk-QCMMUFDB.mjs";import{a as U,d as L,g as F,i as B,n as W,r as R}from"./chunk-3JAW3IHD.mjs";import{G as D,I as N,J as O,h as E,j as q,k as j,v as A}from"./chunk-GETTAUF5.mjs";import{$ as y,$a as g,Bc as v,Dc as V,Fc as T,Ob as p,Pb as c,Qb as n,Rb as w,Yb as x,bb as a,bc as m,cc as s,ea as C,ka as u,la as l,nb as f,qc as d,sc as h,tb as _,uc as S,vc as k,wc as P,xc as M,zb as I}from"./chunk-RSKEQSSP.mjs";var H=class i{http=C(A);baseUrl=`${O.apiUrl}/Categories`;getCategories(){return this.http.get(this.baseUrl)}getCategoryById(r){return this.http.get(`${this.baseUrl}/${r}`)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=y({token:i,factory:i.\u0275fac,providedIn:"root"})};var $=i=>["/product-detail",i];function K(i,r){if(i&1){let e=x();c(0,"div",8)(1,"div",9)(2,"button",10),m("click",function(){u(e);let o=s();return l(o.decreaseQty())}),d(3,"\u2212"),n(),c(4,"input",11),P("ngModelChange",function(o){u(e);let b=s();return k(b.quantity,o)||(b.quantity=o),l(o)}),n(),c(5,"button",10),m("click",function(){u(e);let o=s();return l(o.increaseQty())}),d(6,"+"),n()(),c(7,"button",12),m("click",function(){u(e);let o=s();return l(o.addToCart())}),d(8,"Add to Cart"),n()()}if(i&2){let e=s();a(4),S("ngModel",e.quantity)}}var G=class i{constructor(r,e){this.cartService=r;this.toastr=e}product=null;showActions=!0;cartId;quantity=1;ngOnInit(){}initCart(){this.cartService.getOrCreateCart().subscribe(r=>{this.cartId=r,this.loadExistingQuantity()})}loadExistingQuantity(){this.product?.id&&this.cartService.getProductQuantity(this.cartId,this.product.id).subscribe(r=>{r>0&&(this.quantity=r)})}addToCart(){if(!this.product?.id){console.warn("Cannot add to cart: Product ID is missing");return}if(this.cartId=this.cartService.getCartId()||0,this.cartId===0){console.warn("Cannot add to cart: Cart ID is invalid");return}this.cartService.addItem(this.cartId,this.product.id,this.quantity).subscribe(()=>{this.toastr.success("Cart updated successfully")})}increaseQty(){this.quantity++}decreaseQty(){this.quantity>1&&this.quantity--}static \u0275fac=function(e){return new(e||i)(f(Q),f(z))};static \u0275cmp=_({type:i,selectors:[["app-product-card"]],inputs:{product:"product",showActions:"showActions"},decls:11,vars:17,consts:[[1,"card","h-100","shadow-sm","border-0","hover-shadow"],[1,"text-decoration-none",3,"routerLink"],[1,"card-img-top",2,"height","200px","object-fit","cover","cursor","pointer",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"card-title"],[1,"text-decoration-none","text-dark",3,"routerLink"],[1,"card-text","text-success","fw-bold","fs-5","mb-3"],["class","mt-auto",4,"ngIf"],[1,"mt-auto"],[1,"input-group","mb-2"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","number","min","1",1,"form-control","text-center",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","w-100",3,"click"]],template:function(e,t){e&1&&(c(0,"div",0)(1,"a",1),w(2,"img",2),n(),c(3,"div",3)(4,"h5",4)(5,"a",5),d(6),n()(),c(7,"p",6),d(8),V(9,"currency"),n(),I(10,K,9,1,"div",7),n()()),e&2&&(a(),p("routerLink",v(13,$,t.product==null?null:t.product.id)),a(),p("alt",M(t.product==null?null:t.product.title))("src",(t.product==null?null:t.product.imageUrl)||"https://st2.depositphotos.com/2586633/46477/v/450/depositphotos_464771766-stock-illustration-no-photo-or-blank-image.jpg",g),a(3),p("routerLink",v(15,$,t.product==null?null:t.product.id)),a(),h(" ",t.product==null?null:t.product.title," "),a(2),h(" ",T(9,8,t.product==null?null:t.product.price,"USD","symbol","1.2-2")," "),a(2),p("ngIf",t.showActions))},dependencies:[R,U,B,L,W,F,j,E,N,D,q],encapsulation:2})};export{H as a,G as b};
