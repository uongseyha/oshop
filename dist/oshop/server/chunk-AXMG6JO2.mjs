import './polyfills.server.mjs';
import{a as T,b as N}from"./chunk-YLTFAGNL.mjs";import{a as M}from"./chunk-IUAPMVRG.mjs";import"./chunk-WPFXNJQP.mjs";import"./chunk-QCMMUFDB.mjs";import"./chunk-3JAW3IHD.mjs";import{C as E,g as f,h as F,k as y}from"./chunk-GETTAUF5.mjs";import{Ob as a,Pb as r,Qb as o,Rb as I,T as P,Yb as w,bb as n,bc as p,cc as u,gb as b,ka as x,la as S,nb as d,oc as h,qc as l,sc as m,tb as g,zb as s}from"./chunk-RSKEQSSP.mjs";import"./chunk-S6KH3LOX.mjs";function j(i,e){if(i&1){let t=w();r(0,"button",4),p("click",function(){let C=x(t).$implicit,_=u();return S(_.filterByCategory(C))}),l(1),o()}if(i&2){let t=e.$implicit,c=u();h("active",c.selectedCategory===t),n(),m(" ",t.name||t.description," ")}}var v=class i{constructor(e){this.categoryService=e;this.loadCategories()}categories=[];selectedCategory=null;categorySelected=new b;loadCategories(){this.categoryService.getCategories().subscribe(e=>{this.categories=e})}filterByCategory(e){this.selectedCategory=e,this.categorySelected.emit(e)}static \u0275fac=function(t){return new(t||i)(d(T))};static \u0275cmp=g({type:i,selectors:[["app-product-filter"]],outputs:{categorySelected:"categorySelected"},decls:8,vars:3,consts:[[1,"card","shadow-sm","border-0","sticky-top",2,"top","1rem"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"list-group","list-group-flush"],["type","button",1,"list-group-item","list-group-item-action",3,"click"],["type","button","class","list-group-item list-group-item-action",3,"active","click",4,"ngFor","ngForOf"]],template:function(t,c){t&1&&(r(0,"div",0)(1,"div",1)(2,"h5",2),l(3,"Categories"),o()(),r(4,"div",3)(5,"button",4),p("click",function(){return c.filterByCategory(null)}),l(6," All Products "),o(),s(7,j,2,3,"button",5),o()()),t&2&&(n(5),h("active",c.selectedCategory===null),n(2),a("ngForOf",c.categories))},dependencies:[y,f],encapsulation:2})};function A(i,e){i&1&&(r(0,"div",7)(1,"div",8)(2,"span",9),l(3,"Loading..."),o()(),r(4,"p",10),l(5,"Loading products..."),o()())}function R(i,e){if(i&1&&(r(0,"div",17),I(1,"app-product-card",18),o()),i&2){let t=e.$implicit;n(),a("product",t)}}function V(i,e){i&1&&(r(0,"div",19)(1,"h4",13),l(2,"No products found in this category"),o(),r(3,"p"),l(4,"Try selecting a different category or adjust filters"),o()())}function $(i,e){if(i&1&&(r(0,"div")(1,"div",11)(2,"h3",12),l(3),r(4,"small",13),l(5),o()()(),r(6,"div",14),s(7,R,2,1,"div",15)(8,V,5,0,"div",16),o()()),i&2){let t=u();n(3),m(" ",t.getCategoryName()," "),n(2),m("(",t.filteredProducts.length," items)"),n(2),a("ngForOf",t.filteredProducts),n(),a("ngIf",t.filteredProducts.length===0)}}var k=class i{constructor(e,t){this.productService=e;this.route=t;this.loadProducts()}products=[];filteredProducts=[];selectedCategory=null;loading=!1;loadProducts(){this.loading=!0,this.productService.getProducts().pipe(P(e=>(this.products=e,this.route.queryParamMap))).subscribe(e=>{let t=e.get("categoryId"),c=t?{id:+t,name:"",description:""}:null;this.filterByCategory(c||null),this.loading=!1})}filterByCategory(e){e?.id?(this.filteredProducts=this.products.filter(t=>t.categoryId===e.id),this.selectedCategory=e):(this.filteredProducts=this.products,this.selectedCategory=null)}getCategoryName(){return this.selectedCategory?this.selectedCategory.name||this.selectedCategory.description:"All Products"}static \u0275fac=function(t){return new(t||i)(d(M),d(E))};static \u0275cmp=g({type:i,selectors:[["app-products"]],decls:7,vars:2,consts:[[1,"container-fluid","my-4"],[1,"row"],[1,"col-lg-3","col-xl-2","mb-4","mb-lg-0"],[3,"categorySelected"],[1,"col-lg-9","col-xl-10"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-3","text-muted"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],[1,"text-muted"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","row-cols-lg-3","row-cols-xl-4","g-4"],["class","col",4,"ngFor","ngForOf"],["class","col-12 text-center py-5",4,"ngIf"],[1,"col"],[3,"product"],[1,"col-12","text-center","py-5"]],template:function(t,c){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-product-filter",3),p("categorySelected",function(_){return c.filterByCategory(_)}),o()(),r(4,"div",4),s(5,A,6,0,"div",5)(6,$,9,4,"div",6),o()()()),t&2&&(n(5),a("ngIf",c.loading),n(),a("ngIf",!c.loading))},dependencies:[y,f,F,v,N],encapsulation:2})};export{k as Products};
